<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Japan Learn</title>
        <script src="https://unpkg.com/wanakana@4.0.2/umd/wanakana.min.js"></script>
        <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
        <script src="japan.js"></script>
    </head>

    <style>
        * { margin: 0px; padding: 0px; }
        body { padding: 20px; }
        #kana{
            font-size: 50px;
        }
        #answer{
            width: 162px;
        }
        #leftside {
            float: left;
        }
        #rightside {
            float: right;
        }
    </style>
    <body>

        <div id="leftside">
            <form action="">
                <input type="checkbox" name="0" class="checkbox">
                <label for="0">Base</label>
                <input type="checkbox" name="1" class="checkbox">
                <label for="1">K.</label>
                <input type="checkbox" name="2" class="checkbox">
                <label for="2">S.</label>
                <input type="checkbox" name="3" class="checkbox">
                <label for="3">T.</label>
                <input type="checkbox" name="4" class="checkbox">
                <label for="4">N.</label>
                <input type="checkbox" name="5" class="checkbox">
                <label for="5">H.</label>
                <input type="checkbox" name="6" class="checkbox">
                <label for="6">M.</label>
                <input type="checkbox" name="7" class="checkbox">
                <label for="7">Y.</label>
                <input type="checkbox" name="8" class="checkbox">
                <label for="8">R.</label>
                <input type="checkbox" name="9" class="checkbox">
                <label for="9">W.</label>
                <input type="checkbox" name="10" class="checkbox">
                <label for="10">N</label>
            </form>
            <p id="kana"></p>
            <input id="answer" type="text">
        </div>

        <div id="rightside">
            <table id="kanaTable">
                <thead>
                    <tr>
                        <td>Kana</td>
                        <td>Succ√®s</td>
                        <td>Erreur</td>
                    </tr>
                </thead>
                <tbody id="tbodykanaTable">

                </tbody>
            </table>
        </div>
        
    </body>
    <script>
        genResult();
        let kanaAsk = randKana();
        // console.log(kanaAsk);
        tableGen();

        $("#kana").text(wanakana.toHiragana(kanaAsk));

        $("#answer").keyup(function(e){
            if(e.keyCode == 13 && $("#answer").val()!="")
            {
               let answer = $("#answer").val();
               $("#answer").val("");
               if(kanaAsk.toLowerCase() == answer.toLowerCase()){
                    kanaResult["hiragana"][kanaAsk]["success"]++;
                    tableGen();
                    $('#kana').css("backgroundColor","green");
                    $("#kana").text(kanaAsk);
                    setTimeout(function () {
                        $('#kana').css("backgroundColor","white");
                        kanaAsk = randKana();
                        $("#kana").text(wanakana.toHiragana(kanaAsk));
                    }, 500);
               }else{
                    kanaResult["hiragana"][kanaAsk]["error"]++;
                    tableGen();
                    $('#kana').css("backgroundColor","red");
                    $("#kana").text(kanaAsk);
                    setTimeout(function () {
                        $('#kana').css("backgroundColor","white");
                        kanaAsk = randKana();
                        $("#kana").text(wanakana.toHiragana(kanaAsk));
                    }, 500);
               }
            }
        });

        genKanaList()
        $('.checkbox').click(function (e){
            console.log("ok");
            genKanaList();
            kanaAsk = randKana();
            $("#kana").text(wanakana.toHiragana(kanaAsk));
        });
        
    </script>
</html>